/* <div id="muconsolecontainer">
<!--
 * Copyright Paul Bohm
 * Based on code Copyright Facebook Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @provides fb.console
 * -->
 */
    var muconsoledata = {"html": "\n<div id=\"muconsole\">\n  <div style=\"position:relative; float:right; right: 20px; top:10px; font-size: 18px;cursor:pointer;\" onclick=\"FB.MUConsole.hide();\">X</div>\n  <h1>M&#181; Connect &mdash; Console</h1>\n  <h3>brought to you by <a href=\"http://facebook.com/\">Facebook</a> and <a href=\"http://paulbohm.com/\">Paul Bohm</a></h3>\n\n  <div id=\"controls\">\n    <div id=\"connect\">\n      <h2>Connect</h2>\n\n      <input type=\"button\"\n             value=\"Status\"\n             onclick=\"FB.getLoginStatus(null, true)\">\n      <input type=\"button\"\n             value=\"Login\"\n             onclick=\"FB.login()\"\n             id=\"bt-login\"\n             disabled=\"disabled\">\n      <input type=\"button\"\n             value=\"Disconnect\"\n             onclick=\"FB.api({ method: 'Auth.revokeAuthorization' })\"\n             id=\"bt-disconnect\"\n             disabled=\"disabled\">\n      <input type=\"button\"\n             value=\"Logout\"\n             onclick=\"FB.logout()\"\n             id=\"bt-logout\"\n             disabled=\"disabled\">\n    </div>\n\n    <div id=\"connected\">\n      <div id=\"permissions\">\n        <h2>Permissions <span class=\"info\" id=\"perms-info\"></span></h2>\n\n        <input type=\"button\"\n               value=\"Read Stream\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms:'read_stream'})\">\n        <input type=\"button\"\n               value=\"Publish Stream\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms: 'publish_stream'})\">\n        <input type=\"button\"\n               value=\"Full Stream\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms: 'read_stream,publish_stream'})\">\n        <input type=\"button\"\n               value=\"Offline Access\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms: 'offline_access'})\">\n        <input type=\"button\"\n               value=\"Events\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms: 'create_event,rsvp_event'})\">\n        <input type=\"button\"\n               value=\"SMS\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms: 'sms'})\">\n        <input type=\"button\"\n               value=\"Bulk\"\n               onclick=\"FB.login(FB.MUConsole.gotPerms, {perms: 'read_stream,offline_access,sms,create_event,rsvp_event'})\">\n      </div>\n\n      <!-- <div id=\"integration\">\n        <h2>Integration <span class=\"info\" id=\"integration-info\"></span></h2>\n\n        <input type=\"button\"\n               disabled=\"disabled\"\n               value=\"Add Friend\"\n               onclick=\"FB.addFriend('499029861', friendAdded)\">\n      </div>\n    </div> -->\n\n    <div id=\"sans-session\">\n      <h2>Sans Session <span class=\"info\" id=\"sans-session-info\"></span></h2>\n\n      <input type=\"button\" value=\"Publish\" onclick=\"FB.MUConsole.publishExample()\">\n      <input type=\"button\" value=\"Share\"   onclick=\"FB.share()\">\n    </div>\n  </div>\n\n  <div>\n    Status\n    <span id=\"status\"></span>\n\n    <a id=\"user-info\" style=\"visibility: hidden;\">\n      as\n      <span id=\"user-name\"></span>\n      <img id=\"user-pic\"\n           src=\"http://static.ak.fbcdn.net/pics/t_silhouette.jpg\"\n           alt=\"User Picture\">\n    </a>\n  </div>\n  <div id=\"info\"></div>\n</div>\n\n", "css": "\n\n#muconsole html, #muconsole body, #muconsole div, #muconsole span, #muconsole applet, #muconsole object, #muconsole iframe,\n#muconsole h1, #muconsole h2, #muconsole h3, #muconsole h4, #muconsole h5, #muconsole h6, #muconsole p, #muconsole blockquote, #muconsole pre,\n#muconsole a, #muconsole abbr, #muconsole acronym, #muconsole address, #muconsole big, #muconsole cite, #muconsole code,\n#muconsole del, #muconsole dfn, #muconsole em, #muconsole font, #muconsole img, #muconsole ins, #muconsole kbd, #muconsole q, #muconsole s, #muconsole samp,\n#muconsole small, #muconsole strike, #muconsole strong, #muconsole sub, #muconsole sup, #muconsole tt, #muconsole var,\n#muconsole b, #muconsole u, #muconsole i, #muconsole center,\n#muconsole dl, #muconsole dt, #muconsole dd, #muconsole ol, #muconsole ul, #muconsole li,\n#muconsole fieldset, #muconsole form, #muconsole label, #muconsole legend,\n#muconsole table, #muconsole caption, #muconsole tbody, #muconsole tfoot, #muconsole thead, #muconsole tr, #muconsole th, #muconsole td {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tfont-size: 100%;\n\tvertical-align: baseline;\n\tbackground: transparent;\n}\n\n#muconsole body {\n\tline-height: 1;\n}\n#muconsole ol, ul {\n\tlist-style: none;\n}\n#muconsole blockquote, q {\n\tquotes: none;\n}\n#muconsole blockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\n\n/* remember to define focus styles! */\n#muconsole :focus {\n\toutline: 0;\n}\n\n/* remember to highlight inserts somehow! */\n#muconsole ins {\n\ttext-decoration: none;\n}\n#muconsole del {\n\ttext-decoration: line-through;\n}\n\n/* tables still need 'cellspacing=\"0\"' in the markup */\n#muconsole table {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\n\n#muconsole, #muinfo {\n  font-size: 12px;\n  font-family: \"Lucida Grande\", Tahoma, Verdana, Arial, sans-serif;\n  position: absolute;\n  left:5px;\n  top:5px;\n  opacity: 1;\n  background-color: #fff;\n  z-index: 99999999999;\n  display: none;\n}\n#muconsole {\n  border: orange groove 3px;\n}\n#muinfo {\n  font-size: 18px;\n}\n\n#mubookmarklet #muconsole {\n  display: block;\n}\n\n#muinfo {\n  display: block;\n}\n#mubookmarklet #muinfo {\n  display: none;\n}\n\n#muconsole span {\n  color: #000;\n  z-index: 99999999999;\n  padding: 10px;\n}\n#muconsole h1 {\n  display: block;\n  font-size: 2em;\n  font-weight: bold;\n  margin: 0.67em 0px 0.67em 10px;\n  color: #000;\n}\n#muconsole h3 {\n  font-size: 1.17em;\n  font-weight: bold;\n  margin: -10px 0px 1em 30px;\n  color: #000;\n}\n#muconsole h2 {\n  display: block;\n  font-size: 1.5em;\n  font-weight: bold;\n  margin: 0.83em 0px;\n  color: #009E29;\n}\n#muconsole a {\n  color: #3B5998;\n  text-decoration: none;\n}\n\n#muconsole th {\n  font-weight: bold;\n}\n#muconsole td, #muconsole th {\ndisplay: table-cell;\nvertical-align: inherit;\n}\n\n#muconsole table {\nborder-spacing: 2px 2px;\nborder-color: gray;\nborder-collapse: separate;\ndisplay: table;\n}\n\n#muconsole a:hover {\n  text-decoration: underline;\n}\n\n#muconsole #controls {\n  margin: 20px 0 20px 0;\n  border-bottom: 1px solid #eee;\n}\n#muconsole #controls > div {\n  margin-left: 20px;\n  margin-bottom: 30px;\n}\n#muconsole #connected > div {\n  margin-bottom: 30px;\n}\n#muconsole .info {\n  font-size: 13px;\n  padding: 4px;\n}\n#muconsole .info.yes {\n  background-color: #fbfaf3;\n  color: #36365a;\n}\n#muconsole .info.no {\n  background-color: #fef8f6;\n  color: #cd0a0a;\n}\n#muconsole #status {\n  font-weight: bold;\n  font-size: 15px;\n  padding: 3px 6px;\n}\n#muconsole #status.notConnected {\n  background-color: #cc3f85;\n  color: #fff;\n}\n#muconsole #status.connected {\n  background-color: #448805;\n  color: #fff;\n}\n#muconsole #info {\n  margin-top: 12px;\n  font-family: Monaco, Consolas, monospace;\n}\n#muconsole #info th {\n  text-align: left;\n  padding-right: 20px;\n}\n\n#muconsole #user-info {\n  margin-left: 70px;\n}\n#muconsole #user-name {\n  font-size: 18px;\n  font-weight: bold;\n}\n#muconsole #user-pic {\n  -moz-border-radius: 6px;\n  -webkit-border-radius: 6px;\n  border-radius: 6px;\n  vertical-align: middle;\n  margin-left: 5px;\n  border: none;\n  height: 50px;\n  width: 50px;\n}\n#muconsole #contents li {\n  margin: 0;\n  list-style-type: circle;\n}\n\n/**\n * Tag Browser\n */\n#muconsole .tag-configurer {\n  margin-bottom: 1em;\n  width: 700px;\n}\n#muconsole .tag-configurer textarea,\n#muconsole .tag-configurer .preview {\n  float: right;\n  width: 400px;\n}\n#muconsole .tag-configurer .attr {\n  margin-top: 0.25em;\n}\n#muconsole .tag-configurer .attr label {\n  display: inline-block;\n  width: 100px;\n}\n", "js": "\n\nif (window.FB){\n  var FB = window.FB;\n/* be aware $_ is plain getElementById! */\n  $_ = function(i) { return document.getElementById(i); };\n\n  FB.provide('MUConsole', {\n    publishExample: function() {\n      var post = {\n        message: 'This is some text',\n        action_links: [\n          { text:'custom action link', href:'http://github.com/enki/muconsole/'}\n        ],\n        user_message_prompt: 'Tell the world about Popups?'\n      };\n      FB.publish(post, function(published_post) {\n        FB.MUConsole.statusUpdate(\n          'sans-session-info',\n          'post was ' + (published_post ? '' : 'not ') + 'published.',\n          published_post\n        );\n      });\n    },\n\n    showUserInfo: function() {\n      var userInfo = $_('user-info');\n      if (!FB.getSession()) {\n        userInfo.style.visibility = 'hidden';\n      } else {\n        var params = {\n          method: 'Fql.query',\n          query: (\n            'SELECT ' +\n              'name,' +\n              'pic_square,' +\n              'profile_url ' +\n            'FROM ' +\n              'user ' +\n            'WHERE ' +\n              'uid=' + FB.getSession().uid\n          )\n        };\n\n        FB.api(params, function(info) {\n          if (info.error_code) {\n            // bail\n            return;\n          }\n\n          info = info[0];\n\n          $_('user-name').innerHTML = info.name;\n          $_('user-pic').src = info.pic_square;\n          userInfo.href = info.profile_url;\n          userInfo.style.visibility = 'visible';\n        });\n      }\n    },\n\n    showSessionInfo: function() {\n      var\n        session     = FB.getSession(),\n        sessionInfo = $_('info');\n\n      if (!session) {\n        sessionInfo.style.visibility = 'hidden';\n      } else {\n        var rows = [];\n        for (var key in session) {\n          rows.push('<th>' + key + '</th>' + '<td>' + session[key] + '</td>');\n        }\n        sessionInfo.style.visibility = 'visible';\n        sessionInfo.innerHTML = (\n          '<table>' +\n          '<tr>' + rows.join('</tr><tr>') + '</tr>' +\n          '</table>'\n        );\n      }\n    },\n\n    // handles a session (or lack thereof)\n     gotStatus: function(response) {\n      FB.log(response);\n      FB.MUConsole.showSessionInfo();\n      FB.MUConsole.showUserInfo();\n\n      $_('status').innerHTML = response.status;\n      $_('status').className = response.status;\n\n      // var input = $_('integration').getElementsByTagName('input');\n      // for (var i=0, l=input.length; i<l; i++) {\n      //   input[i].disabled = !response.session;\n      // }\n\n      if (response.session) {\n        $_('bt-disconnect').disabled = $_('bt-logout').disabled = false;\n        $_('bt-login').disabled = true;\n      } else {\n        $_('bt-login').disabled = false;\n        $_('bt-disconnect').disabled = $_('bt-logout').disabled = true;\n      }\n    },\n\n     gotPerms: function(response) {\n      FB.MUConsole.gotStatus(response);\n      FB.MUConsole.statusUpdate(\n        'perms-info',\n        'were ' + (response.perms ? '' : 'not ') + 'granted.',\n        response.perms\n      );\n    },\n\n     statusUpdate: function(infoID, msg, yes) {\n      var info = $_(infoID);\n      info.innerHTML = msg;\n      info.className = 'info ' + (yes ? 'yes' : 'no');\n      info.style.visibility = 'visible';\n      window.setTimeout(function() { info.style.visibility = 'hidden'; }, 3000);\n    },\n\n    show: function(){\n      $_('muconsole').style.display = 'block';\n    },\n  \n    hide: function(){\n      $_('muconsole').style.display = 'none';\n    },\n\n    // friendAdded: function(added) {\n    //   FB.MUConsole.statusUpdate(\n    //     'integration-info',\n    //     'friend was ' + (added ? '' : 'not ') + 'added.',\n    //     added\n    //   );\n    // }\n    missingCommaErrorPreventer:''\n  });\n  if(FB.MUConsole.subscribe_on_load){\n    FB.Event.subscribe('auth.statusChange', FB.MUConsole.gotStatus);\n    FB.getLoginStatus();    \n  }\n}\n"};
    FB = window.FB;
    
    function create(tag, type, content, sid){
        var a = document.createElement(tag);
        if (type) {
            a.type=type;
        }
        if (sid) {
            a.id = sid;
        }
        a.innerHTML = content;
        document.body.appendChild(a);
    }
    
    if (!FB.MUConsole) {
        FB.MUConsole = {};
        FB.MUConsole.subscribe_on_load = true;
        create('style', 'text/css', muconsoledata['css']);
        create('div', undefined, muconsoledata['html'], 'mubookmarklet');
        create('script', 'text/javascript', muconsoledata['js']);
    }
    //FB.MUConsole.show();
